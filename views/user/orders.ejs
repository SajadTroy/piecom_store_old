<link rel="stylesheet" href="/cdn/css/product.css">
<link rel="stylesheet" href="/cdn/css/orders.css">

<div class="products-container">
    <div class="page-header">
        <h1>My Orders</h1>
    </div>

    <% if (orders && orders.length > 0) { %>
        <div class="orders-list">
            <% orders.forEach(order => { %>
                <div class="order-card">
                    <div class="order-header">
                        <div class="order-info">
                            <div class="order-id">#<%= order.orderId.slice(-8) %></div>
                            <div class="order-date"><%= new Date(order.createdAt).toLocaleDateString() %></div>
                        </div>
                        <div class="order-status <%= order.status.toLowerCase() %>">
                            <%= order.status %>
                        </div>
                    </div>

                    <div class="order-products">
                        <% order.products.forEach(item => { %>
                            <div class="order-item">
                                <div class="item-image">
                                    <img src="<%= item.productId.images[0] %>" alt="<%= item.productId.name %>">
                                </div>
                                <div class="item-details">
                                    <h3><%= item.productId.name %></h3>
                                    <div class="item-meta">
                                        <span>Qty: <%= item.quantity %></span>
                                        <span>₹<%= item.subtotal %></span>
                                    </div>
                                </div>
                            </div>
                        <% }) %>
                    </div>

                    <div class="order-footer">
                        <div class="order-amount">
                            <div class="amount-row">
                                <span>Items Total</span>
                                <span>₹<%= order.totalAmount - order.deliveryFee - order.paymentFee %></span>
                            </div>
                            <div class="amount-row">
                                <span>Delivery Fee</span>
                                <span>₹<%= order.deliveryFee %></span>
                            </div>
                            <div class="amount-row">
                                <span>Payment Fee</span>
                                <span>₹<%= order.paymentFee %></span>
                            </div>
                            <div class="amount-row total">
                                <span>Total Amount</span>
                                <span>₹<%= order.totalAmount %></span>
                            </div>
                        </div>
                    </div>
                </div>
            <% }) %>
        </div>
    <% } else { %>
        <div class="no-orders">
            <svg width="64" height="64" fill="none" stroke="currentColor" stroke-width="1.5" viewBox="0 0 24 24">
                <path d="M9 5H7a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V7a2 2 0 0 0-2-2h-2M9 5a2 2 0 0 1 2-2h2a2 2 0 0 1 2 2M9 5h6M9 12h6m-6 4h6"/>
            </svg>
            <p>No orders yet</p>
            <a href="/" class="button button-primary">Start Shopping</a>
        </div>
    <% } %>
</div>
